{"version":3,"file":"static/js/934.f17a6472.chunk.js","mappings":"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","sources":["components/header.js","constants/paths.js","hooks/use-user.js","pages/not-found.js","services/firebase.js","../javascript/esm|C:/Users/zoran.kostovski/Desktop/reactgram-tailwindcss/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../javascript/esm|C:/Users/zoran.kostovski/Desktop/reactgram-tailwindcss/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../javascript/esm|C:/Users/zoran.kostovski/Desktop/reactgram-tailwindcss/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../javascript/esm|C:/Users/zoran.kostovski/Desktop/reactgram-tailwindcss/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js"],"sourcesContent":["import { useContext } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport FirebaseContext from '../context/firebase';\nimport UserContext from '../context/user';\nimport * as ROUTES from '../constants/routes';\nimport { DEFAULT_IMAGE_PATH } from '../constants/paths';\nimport useUser from '../hooks/use-user';\n\nexport default function Header() {\n   const { user: loggedInUser } = useContext(UserContext);\n   const { user } = useUser(loggedInUser?.uid);\n   const { firebase } = useContext(FirebaseContext);\n   const history = useHistory();\n\n   //console.log({ user })\n\n   return (\n      <header className=\"h-16 bg-white border-b border-gray-primary mb-8\">\n         <div className=\"container mx-auto max-w-screen-lg h-full\">\n            <div className=\"flex justify-between h-full\">\n               <div className=\"text-gray-700 text-center flex items-center align-items cursor-pointer\">\n                  <h1 className=\"flex justify-center w-full\">\n                     <Link to={ROUTES.DASHBOARD} aria-label=\"Instagram logo\">\n                        <img src=\"/images/logo.png\" alt=\"Instagram\" className=\"mt-2 w-6/12\" />\n                     </Link>\n                  </h1>\n               </div>\n               <div className=\"text-gray-700 text-center flex items-center align-items\">\n                  {loggedInUser ? (\n                     <>\n                        <Link to={ROUTES.DASHBOARD} aria-label=\"Dashboard\">\n                           <svg\n                              className=\"w-8 mr-6 text-black-light cursor-pointer\"\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                              stroke=\"currentColor\"\n                           >\n                              <path\n                                 strokeLinecap=\"round\"\n                                 strokeLinejoin=\"round\"\n                                 strokeWidth={2}\n                                 d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n                              />\n                           </svg>\n                        </Link>\n\n                        <button\n                           type=\"button\"\n                           title=\"Sign Out\"\n                           onClick={() => {\n                              firebase.auth().signOut();\n                              history.push(ROUTES.LOGIN);\n                           }}\n                           //Sign out with enter key\n                           onKeyDown={(event) => {\n                              if (event.key === 'Enter') {\n                                 firebase.auth().signOut();\n                                 history.push(ROUTES.LOGIN);\n                              }\n                           }}\n                        >\n                           <svg\n                              className=\"w-8 mr-6 text-black-light cursor-pointer\"\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                              stroke=\"currentColor\"\n                           >\n                              <path\n                                 strokeLinecap=\"round\"\n                                 strokeLinejoin=\"round\"\n                                 strokeWidth={2}\n                                 d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n                              />\n                           </svg>\n                        </button>\n                        {user && (\n                           <div className=\"flex items-center cursor-pointer\">\n                              <Link to={`/p/${user?.username}`}>\n                                 <img\n                                    className=\"rounded-full h-8 w-8 flex\"\n                                    src={`/images/avatars/${user?.username}.jpg`}\n                                    // src={`/images/avatars/steve.jpg`}\n                                    alt={`${user?.username} profile`}\n                                    onError={(e) => {\n                                       e.target.src = DEFAULT_IMAGE_PATH;\n                                    }}\n                                 />\n                              </Link>\n                           </div>\n                        )}\n                     </>\n                  ) : (\n                     <>\n                        <Link to={ROUTES.LOGIN}>\n                           <button\n                              type=\"button\"\n                              className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\n                           >\n                              Log In\n                           </button>\n                        </Link>\n                        <Link to={ROUTES.SIGN_UP}>\n                           <button\n                              type=\"button\"\n                              className=\"font-bold text-sm rounded text-blue-medium w-20 h-8\"\n                           >\n                              Sign Up\n                           </button>\n                        </Link>\n                     </>\n                  )}\n               </div>\n            </div>\n         </div>\n      </header>\n   );\n}\n","export const DEFAULT_IMAGE_PATH = '/images/avatars/default.png';\n","import { useState, useEffect } from 'react';\nimport { getUserByUserId } from '../services/firebase';\n\nexport default function useUser(userId) {\n   const [activeUser, setActiveUser] = useState();\n\n   useEffect(() => {\n      async function getUserObjByUserId(userId) {\n         const [user] = await getUserByUserId(userId);\n         setActiveUser(user || {});\n      }\n\n      if (userId) {\n         getUserObjByUserId(userId);\n      }\n   }, [userId]);\n\n   return { user: activeUser, setActiveUser };\n}\n","import { useEffect } from 'react';\nimport Header from '../components/header';\n\nexport default function NotFound() {\n  useEffect(() => {\n    document.title = 'Not Found - Instagram';\n  }, []);\n\n  return (\n    <div className=\"bg-gray-background\">\n      <Header />\n      <div className=\"mx-auto max-w-screen-lg\">\n        <p className=\"text-center text-2xl\">Not Found!</p>\n      </div>\n    </div>\n  );\n}\n","import { firebase, FieldValue } from '../lib/firebase';\n\nexport async function doesUsernameExist(username) {\n   const result = await firebase\n      .firestore()\n      .collection('users')\n      .where('username', '==', username.toLowerCase())\n      .get();\n\n   return result.docs.length > 0;\n}\n\nexport async function getUserByUsername(username) {\n   const result = await firebase\n      .firestore()\n      .collection('users')\n      .where('username', '==', username.toLowerCase())\n      .get();\n\n   return result.docs.map((item) => ({\n      ...item.data(),\n      docId: item.id\n   }));\n}\n\n// get user from the firestore where userId === userId (passed from the auth)\nexport async function getUserByUserId(userId) {\n   const result = await firebase.firestore().collection('users').where('userId', '==', userId).get();\n   const user = result.docs.map((item) => ({\n      ...item.data(),\n      docId: item.id\n   }));\n\n   return user;\n}\n\n// check all conditions before limit results\nexport async function getSuggestedProfiles(userId, following) {\n   let query = firebase.firestore().collection('users');\n\n   if (following.length > 0) {\n      query = query.where('userId', 'not-in', [...following, userId]);\n   } else {\n      query = query.where('userId', '!=', userId);\n   }\n   const result = await query.limit(10).get();\n\n   const profiles = result.docs.map((user) => ({\n      ...user.data(), //only data for not followed user(doesn't contain the id of the doc in Firestore)\n      docId: user.id // with this we add the docId plus in the profile data\n   }));\n   //console.log(profiles)\n   return profiles;\n}\n\nexport async function updateLoggedInUserFollowing(\n   loggedInUserDocId, // currently logged in user document id (karl's profile)\n   profileId, // the user that karl requests to follow\n   isFollowingProfile // true/false (am i currently following this person?)\n) {\n   return firebase\n      .firestore()\n      .collection('users')\n      .doc(loggedInUserDocId)\n      .update({\n         following: isFollowingProfile ?\n            FieldValue.arrayRemove(profileId) :\n            FieldValue.arrayUnion(profileId)\n      });\n}\n\nexport async function updateFollowedUserFollowers(\n   profileDocId, // currently logged in user document id (karl's profile)\n   loggedInUserDocId, // the user that karl requests to follow\n   isFollowingProfile // true/false (am i currently following this person?)\n) {\n   return firebase\n      .firestore()\n      .collection('users')\n      .doc(profileDocId)\n      .update({\n         followers: isFollowingProfile ?\n            FieldValue.arrayRemove(loggedInUserDocId) :\n            FieldValue.arrayUnion(loggedInUserDocId)\n      });\n}\n\nexport async function getPhotos(userId, following) {\n   // [5,4,2] => following\n   const result = await firebase\n      .firestore()\n      .collection('photos')\n      .where('userId', 'in', following)\n      .get();\n\n   const userFollowedPhotos = result.docs.map((photo) => ({\n      ...photo.data(),\n      docId: photo.id\n   }));\n\n   const photosWithUserDetails = await Promise.all(\n      userFollowedPhotos.map(async (photo) => {\n         let userLikedPhoto = false; // we create new prop here \n         if (photo.likes.includes(userId)) {\n            userLikedPhoto = true;\n         }\n\n         // photo.userId = 2 //we catch the username from user cause photo doesn't have username field\n         const user = await getUserByUserId(photo.userId);\n\n         // raphael\n         const { username } = user[0];\n         return { username, ...photo, userLikedPhoto };//we return 3 data together(we spread for combining them)\n      })\n\n   );\n\n   return photosWithUserDetails;\n}\n\nexport async function getUserPhotosByUserId(userId) {\n   const result = await firebase\n      .firestore()\n      .collection('photos')\n      .where('userId', '==', userId)\n      .get();\n\n   const photos = result.docs.map((photo) => ({\n      ...photo.data(),\n      docId: photo.id\n   }));\n   return photos;\n}\n\nexport async function isUserFollowingProfile(loggedInUserUsername, profileUserId) {\n   const result = await firebase\n      .firestore()\n      .collection('users')\n      .where('username', '==', loggedInUserUsername) // karl (active logged in user)\n      .where('following', 'array-contains', profileUserId)\n      .get();\n\n   const [response = {}] = result.docs.map((item) => ({\n      ...item.data(),\n      docId: item.id\n   }));\n\n   return response.userId;\n}\n\nexport async function toggleFollow(\n   isFollowingProfile,\n   activeUserDocId,\n   profileDocId,\n   profileUserId,\n   followingUserId\n) {\n   // 1st param: karl's doc id\n   // 2nd param: raphael's user id\n   // 3rd param: is the user following this profile? e.g. does karl follow raphael? (true/false)\n   await updateLoggedInUserFollowing(activeUserDocId, profileUserId, isFollowingProfile);\n\n   // 1st param: karl's user id\n   // 2nd param: raphael's doc id\n   // 3rd param: is the user following this profile? e.g. does karl follow raphael? (true/false)\n   await updateFollowedUserFollowers(profileDocId, followingUserId, isFollowingProfile);\n}\n","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"names":["Header","loggedInUser","useContext","UserContext","user","useUser","uid","firebase","FirebaseContext","history","useHistory","className","to","ROUTES","src","alt","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","type","title","onClick","auth","signOut","push","onKeyDown","event","key","username","onError","e","target","DEFAULT_IMAGE_PATH","userId","useState","activeUser","setActiveUser","useEffect","getUserByUserId","getUserObjByUserId","NotFound","document","doesUsernameExist","collection","where","toLowerCase","get","result","docs","length","getUserByUsername","map","item","data","docId","id","getSuggestedProfiles","following","query","limit","profiles","updateLoggedInUserFollowing","loggedInUserDocId","profileId","isFollowingProfile","doc","update","FieldValue","updateFollowedUserFollowers","profileDocId","followers","getPhotos","userFollowedPhotos","photo","Promise","all","userLikedPhoto","likes","includes","photosWithUserDetails","getUserPhotosByUserId","photos","isUserFollowingProfile","loggedInUserUsername","profileUserId","response","toggleFollow","activeUserDocId","followingUserId","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError"],"sourceRoot":""}